!!! 5
html
  head
    link(href='build.css', rel='stylesheet', media='screen')

  body

    script(data-template-name='index', type='text/x-handlebars')
      br
      {{ view App.EditorView }}
      br
      {{ controller.content }}

    script(src='build.js')
    :coffeescript

      ckedit = require 'ember-ckedit'

      window.App = Em.Application.create()

      App.EditorView = Em.View.extend ckedit

      App.IndexController = Em.Controller.extend
        hasEditor: (->
          editor = @get 'editor'
          if editor
            editor.on 'focus', @updateContent.bind @
            editor.on 'blur', @updateContent.bind @
            editor.on 'key', @updateContent.bind @
        ).observes 'editor'

        updateContent: ->
          editor = @get 'editor'
          content = editor.getData()
          @set 'content', content

      App.Router.map ->

