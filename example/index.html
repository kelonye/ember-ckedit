<!DOCTYPE html>
<html>
  <head>
    <link href='public.css' rel='stylesheet' media='screen'>
  </head>
  <body>

    <script data-template-name='index' type='text/x-handlebars'>
      <br>{{ view App.EditorView }}<br>{{ controller.content }}
    </script>

    <script src='public.js'></script>

    <script type='text/javascript'>

      var ckedit = require('ember-ckedit');

      window.App = Em.Application.create();

      App.EditorView = Em.View.extend(ckedit);

      App.IndexController = Em.Controller.extend({
        hasEditor: function() {
          var editor = this.get('editor');
          if (editor) {
            editor.on('focus', this.updateContent.bind(this));
            editor.on('blur', this.updateContent.bind(this));
            editor.on('key', this.updateContent.bind(this));
          }
        }.observes('editor'),
        updateContent: function() {
          var content, editor;
          editor = this.get('editor');
          content = editor.getData();
          this.set('content', content);
        }
      });
    
    </script>
  </body>
</html>